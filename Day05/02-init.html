<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>vue3</title>
</head>
<body>
  <div id="app">
    {{title}}
  </div>
  <script>
    // 基本结构
    const Vue = {
      createApp(option) {
        return {
          mount(selector) {
            console.log('mount')
            // 1. 找到宿主元素
            const parent = document.querySelector(selector)
            // 2. 渲染页面
            if(!option.render) {
              // 2.1 处理 template
              option.render = this.compile(parent.innerHTML)
            }
            // 2.2 有render函数
            const el = option.render.call(option.data())
            // 3. 追加到宿主
            parent.innerHTML = ''
            parent.appendChild(el)
          },
          compile(template) {
            // 返回一个 render 函数
            // parse -> ast
            // generate -> ast -> render
            return function render() { 
              const h3 = document.createElement('h3');
              h3.textContent = this.title
              return h3
            }
          }
        }
      }
    }
  </script>
  <script>
    // data
    const app = Vue.createApp({
      data() {
        return { 
          title: 'hello, vue3'
        }
      }
    })
    app.mount('#app')
  </script>
</body>
</html>